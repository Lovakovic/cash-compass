<div class="bg-info p-4 rounded-md shadow-lg relative">
  <form class="flex flex-wrap items-center space-x-0 md:space-x-4">
    <div class="relative flex-grow p-1">
      <!-- Filter Icon -->
      <div class="absolute inset-y-0 left-0 flex items-center pl-3">
        <img src="../../../../assets/icons/filter.svg" alt="Filter icon" class="w-6 h-6 text-white cursor-pointer" (click)="toggleExtraFilters()">
      </div>
      <input
        type="text"
        class="w-full pl-12 border-info rounded-lg p-2 shadow-sm"
        placeholder="{{ placeholderSearchTerm }}"
        [(ngModel)]="searchTerm"
        (input)="handleFilterChange()"
        name="search-term"
      />
    </div>

    <div class="w-full md:w-auto p-1">
      <select
        class="w-full border-info rounded-lg p-2 shadow-sm"
        [(ngModel)]="filterCategoryId"
        (change)="handleFilterChange()"
        name="category-filter"
      >
        <option value="">All Categories</option>
        <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
      </select>
    </div>

    <div class="w-full md:w-auto p-1 md:order-last order-3">
      <button cashCompassRaisedButton="danger" (click)="clearFilter()" class="w-full md:w-auto bg-warning text-white rounded-lg p-2 shadow-sm">
        Clear
      </button>
    </div>
  </form>

  <!-- Extra Filters Section -->
  <div [@expandCollapse]="showExtraFilters ? 'expanded' : 'collapsed'" class="overflow-hidden mt-4">
    <div class="flex flex-wrap mx-0 md:-mx-2">
      <!-- Sort Order -->
      <div class="w-full md:w-1/3 px-2">
        <label class="block text-primary text-sm">Sort By:</label>
        <select
          class="w-full border-info rounded-lg p-2 shadow-sm mb-2"
          [(ngModel)]="sortOrder"
          (change)="handleFilterChange()"
          name="sort-order"
        >
          <option value="newest">Date - Newest first</option>
          <option value="oldest">Date - Oldest first</option>
          <option value="cheapest">Amount - Low to High</option>
          <option value="most-expensive">Amount - High to Low</option>
        </select>
      </div>

      <!-- Month-Year Filter -->
      <div class="w-full md:w-1/3 px-2">
        <label class="block text-primary text-sm">Month/Year:</label>
        <select
          class="w-full border-info rounded-lg p-2 shadow-sm mb-2"
          [(ngModel)]="selectedMonthYear"
          (change)="startDate = undefined; endDate = undefined; handleFilterChange()"
          name="month-year-filter"
        >
          <option value="all">All Months</option>
          <option *ngFor="let option of monthYearOptions" [value]="option">
            {{ option }}
          </option>
        </select>
      </div>

      <!-- Start & end date filters -->
      <div class="w-full md:w-1/6 px-2">
        <label class="block text-primary text-sm">Start Date:</label>
        <input
          type="date"
          class="w-full border-info rounded-lg p-2 shadow-sm"
          [(ngModel)]="startDate"
          (change)="selectedMonthYear = undefined; handleFilterChange()"
          name="start-date"
        />
      </div>
      <div class="w-full md:w-1/6 px-2">
        <label class="block text-primary text-sm">End Date:</label>
        <input
          type="date"
          class="w-full border-info rounded-lg p-2 shadow-sm"
          [(ngModel)]="endDate"
          (change)="selectedMonthYear = undefined; handleFilterChange()"
          name="end-date"
        />
      </div>
    </div>
  </div>
</div>
